{"version":3,"sources":["uni-app:///main.js","webpack:///D:/HBuilderX.4.65.2025051206/ç¿å¿ƒ/pages/user/home.vue?53eb","webpack:///D:/HBuilderX.4.65.2025051206/ç¿å¿ƒ/pages/user/home.vue?d90e","webpack:///D:/HBuilderX.4.65.2025051206/ç¿å¿ƒ/pages/user/home.vue?2b72","webpack:///D:/HBuilderX.4.65.2025051206/ç¿å¿ƒ/pages/user/home.vue?99cb","uni-app:///pages/user/home.vue","webpack:///D:/HBuilderX.4.65.2025051206/ç¿å¿ƒ/pages/user/home.vue?7458","webpack:///D:/HBuilderX.4.65.2025051206/ç¿å¿ƒ/pages/user/home.vue?909a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","isLoading","authed","name","uid","avatar","showSubscriptionPopup","subscriptionSettings","stressReminder","dailyTips","communityUpdates","computed","statusText","avatarText","isAdmin","onLoad","console","uni","onShow","tabBarManager","onUnload","methods","refreshProfile","setTimeout","displayName","onAuthChanged","handleAuthAction","handleLogin","url","handleLogout","title","icon","duration","navigateTo","showFeedback","showSubscriptionSettings","loadSubscriptionSettings","subscribeAPI","settings","updateSubscription"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AACgK;AAChK,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAklB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC0ItmB;AAOA;AACA;AAAA;AAAA;AAAA,eAEA;EACAC;IACA;MACA;MACAC;MAEA;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MAEA;MACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EAEAC;IACA;IACAC;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;MAEA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACA;IACA;EACA;EAEAC;IACAC;;IAEA;IACAC;IAEA;EACA;EAEAC;IACAF;IACA;IACA;IACAG;EACA;EAEAC;IACA;IACAH;EACA;EAEAI;IACA;IACAC;MAAA;MACA;MACA;;MAEA;MACAC;QACA;QACA;QACA;QAEA;UACA;UACA;UACA;;UAEA;UACA;UACA;YACAC;UACA;YACAA;UACA;YACA;YACAA;UACA;YACAA;UACA;;UAEA;UACA;UACA;UACA;;UAEA;UACA;QAEA;UACA;UACA;UACA;UACA;QACA;;QAEA;QACAR;;QAEA;QACA;;QAEA;QACA;MACA;IACA;IAEA;IACAS;MACAT;MACA;MACA;IACA;IAEA;IACAU;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAA;cAAA;gBAEA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MACAX;MACAC;QACAW;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACAZ;oBACAa;kBACA;;kBAEA;kBACA;kBAEAd;;kBAEA;kBACA;kBAEAC;kBAEAA;oBACAa;oBACAC;oBACAC;kBACA;gBAEA;kBACAhB;kBACAC;kBACAA;oBACAa;oBACAC;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MACAjB;MACAC;QAAAW;MAAA;IACA;IAEA;IACAM;MACAlB;MACAC;QACAW;MACA;IACA;IAEA;IACAO;MACA;QACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACAC;cAAA;gBAAAC;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAtB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAuB;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACAF;cAAA;gBACArB;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5XA;AAAA;AAAA;AAAA;AAAu3B,CAAgB,23BAAG,EAAC,C;;;;;;;;;;;ACA34B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/home.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/user/home.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./home.vue?vue&type=template&id=9ab56a0c&scoped=true&\"\nvar renderjs\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&id=9ab56a0c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9ab56a0c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/home.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=template&id=9ab56a0c&scoped=true&\"","var components\ntry {\n  components = {\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uSwitch: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-switch/u-switch\" */ \"@/uni_modules/uview-ui/components/u-switch/u-switch.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. æ’æŸ¥ç»„ä»¶åç§°æ‹¼å†™æ˜¯å¦æ­£ç¡®\")\n    console.error(\n      \"2. æ’æŸ¥ç»„ä»¶æ˜¯å¦ç¬¦åˆ easycom è§„èŒƒï¼Œæ–‡æ¡£ï¼šhttps://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. è‹¥ç»„ä»¶ä¸ç¬¦åˆ easycom è§„èŒƒï¼Œéœ€æ‰‹åŠ¨å¼•å…¥ï¼Œå¹¶åœ¨ components ä¸­æ³¨å†Œè¯¥ç»„ä»¶\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showSubscriptionPopup = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"page\">\n    <!-- éª¨æ¶å±åŠ è½½çŠ¶æ€ -->\n    <view v-if=\"isLoading\" class=\"skeleton-wrapper\">\n      <view class=\"skeleton-user-card\">\n        <view class=\"skeleton-avatar skeleton-animation\"></view>\n        <view class=\"skeleton-info\">\n          <view class=\"skeleton-name skeleton-animation\"></view>\n          <view class=\"skeleton-status skeleton-animation\"></view>\n        </view>\n      </view>\n      <view class=\"skeleton-menu skeleton-animation\"></view>\n      <view class=\"skeleton-menu skeleton-animation\"></view>\n    </view>\n    \n    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->\n    <view v-else class=\"user-card\">\n      <view class=\"user-avatar\">\n        <image \n          v-if=\"avatar\" \n          :src=\"avatar\" \n          class=\"avatar-img\"\n          mode=\"aspectFill\"\n        ></image>\n        <view v-else class=\"avatar-placeholder\">\n          <text class=\"avatar-text\">{{ avatarText }}</text>\n        </view>\n      </view>\n      \n      <view class=\"user-info\">\n        <text class=\"user-name\">{{ name }}</text>\n        <text class=\"user-status\">{{ statusText }}</text>\n      </view>\n      \n      <view class=\"user-actions\">\n        <button \n          class=\"action-btn\"\n          :class=\"{ 'logout-btn': authed, 'login-btn': !authed }\"\n          @tap=\"handleAuthAction\"\n        >\n          {{ authed ? 'é€€å‡ºç™»å½•' : 'ç™»å½•/æ³¨å†Œ' }}\n        </button>\n      </view>\n    </view>\n\n    <!-- åŠŸèƒ½èœå• -->\n    <view class=\"menu-section\">\n      <view class=\"menu-title\">\n        <text class=\"title-text\">ä¸ªäººè®¾ç½®</text>\n      </view>\n      \n      <view class=\"menu-list\">\n        <view class=\"menu-item\" @tap=\"navigateTo('/pages-sub/other/profile')\">\n          <view class=\"menu-icon\">ğŸ‘¤</view>\n          <text class=\"menu-text\">ä¸ªäººèµ„æ–™</text>\n          <text class=\"menu-arrow\">â€º</text>\n        </view>\n        \n        <view class=\"menu-item\" @tap=\"navigateTo('/pages-sub/other/settings/settings')\">\n          <view class=\"menu-icon\">âš™ï¸</view>\n          <text class=\"menu-text\">åº”ç”¨è®¾ç½®</text>\n          <text class=\"menu-arrow\">â€º</text>\n        </view>\n        \n        <view class=\"menu-item\" @tap=\"showSubscriptionSettings\">\n          <view class=\"menu-icon\">ğŸ””</view>\n          <text class=\"menu-text\">è®¢é˜…è®¾ç½®</text>\n          <text class=\"menu-arrow\">â€º</text>\n        </view>\n        \n        <view class=\"menu-item\" @tap=\"showFeedback\">\n          <view class=\"menu-icon\">ğŸ’¬</view>\n          <text class=\"menu-text\">æ„è§åé¦ˆ</text>\n          <text class=\"menu-arrow\">â€º</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- å¿«æ·å…¥å£ -->\n    <view class=\"shortcut-section\">\n      <view class=\"menu-title\">\n        <text class=\"title-text\">å¿«æ·å…¥å£</text>\n      </view>\n      \n      <view class=\"shortcut-grid\">\n        <view class=\"shortcut-item\" @tap=\"navigateTo('/pages-sub/stress/history')\">\n          <view class=\"shortcut-icon\">ğŸ“Š</view>\n          <text class=\"shortcut-text\">æ£€æµ‹å†å²</text>\n        </view>\n        \n        <view class=\"shortcut-item\" @tap=\"navigateTo('/pages-sub/other/redeem')\">\n          <view class=\"shortcut-icon\">ğŸ</view>\n          <text class=\"shortcut-text\">CDKå…‘æ¢</text>\n        </view>\n        \n        <view class=\"shortcut-item\" @tap=\"navigateTo('/pages-sub/other/metrics')\" v-if=\"isAdmin\">\n          <view class=\"shortcut-icon\">ğŸ“ˆ</view>\n          <text class=\"shortcut-text\">æ•°æ®æŒ‡æ ‡</text>\n        </view>\n        \n        <view class=\"shortcut-item\" @tap=\"navigateTo('/pages-sub/other/test/index')\">\n          <view class=\"shortcut-icon\">ğŸ§ª</view>\n          <text class=\"shortcut-text\">æµ‹è¯•é¡µé¢</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- è®¢é˜…è®¾ç½®å¼¹çª— -->\n    <u-popup v-model=\"showSubscriptionPopup\" mode=\"bottom\" height=\"60%\" border-radius=\"24\" :safe-area-inset-bottom=\"true\">\n      <view class=\"popup-content\">\n        <view class=\"popup-header\">\n          <text class=\"popup-title\">è®¢é˜…è®¾ç½®</text>\n          <view class=\"popup-close\" @tap=\"showSubscriptionPopup = false\">\n            <text class=\"close-icon\">Ã—</text>\n          </view>\n        </view>\n        <view class=\"popup-body\">\n          <view class=\"setting-item\">\n            <text class=\"setting-label\">å‹åŠ›æ£€æµ‹æé†’</text>\n            <u-switch v-model=\"subscriptionSettings.stressReminder\" @change=\"updateSubscription\"></u-switch>\n          </view>\n          <view class=\"setting-item\">\n            <text class=\"setting-label\">æ¯æ—¥å¿ƒç†å»ºè®®</text>\n            <u-switch v-model=\"subscriptionSettings.dailyTips\" @change=\"updateSubscription\"></u-switch>\n          </view>\n          <view class=\"setting-item\">\n            <text class=\"setting-label\">ç¤¾åŒºåŠ¨æ€é€šçŸ¥</text>\n            <u-switch v-model=\"subscriptionSettings.communityUpdates\" @change=\"updateSubscription\"></u-switch>\n          </view>\n        </view>\n      </view>\n    </u-popup>\n    \n    \n  </view>\n</template>\n\n<script>\nimport { \n  isAuthed, \n  getLoginData, \n  clearLoginData,\n  getUid,\n  getUserInfo\n} from '@/utils/auth.js';\nimport { authAPI, subscribeAPI } from '@/utils/request.js';\nimport tabBarManager from '@/utils/tabbar-manager.js';\n\nexport default {\n  data() {\n    return {\n      // åŠ è½½çŠ¶æ€\n      isLoading: true,\n      \n      // ç”¨æˆ·çŠ¶æ€æ•°æ® - ç›´æ¥å­˜å‚¨ï¼Œä¸ä½¿ç”¨è®¡ç®—å±æ€§\n      authed: false,\n      name: 'æœªç™»å½•',\n      uid: '',\n      avatar: '',\n      \n      // å¼¹çª—çŠ¶æ€\n      showSubscriptionPopup: false,\n      \n      // è®¢é˜…è®¾ç½®\n      subscriptionSettings: {\n        stressReminder: false,\n        dailyTips: false,\n        communityUpdates: false\n      }\n    };\n  },\n  \n  computed: {\n    // çŠ¶æ€æ–‡æœ¬\n    statusText() {\n      return this.authed ? 'å·²ç™»å½•' : 'ç‚¹å‡»ç™»å½•è·å–å®Œæ•´åŠŸèƒ½';\n    },\n    \n    // å¤´åƒæ–‡å­—\n    avatarText() {\n      if (!this.authed) {\n        return 'æœª';\n      }\n      \n      const name = this.name;\n      return name.length > 0 ? name.charAt(0) : 'ç”¨';\n    },\n    \n    // æ˜¯å¦ç®¡ç†å‘˜\n    isAdmin() {\n      // ç®€å•çš„ç®¡ç†å‘˜åˆ¤æ–­é€»è¾‘ï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´\n      const loginData = getLoginData();\n      return loginData.userInfo?.role === 'admin';\n    }\n  },\n  \n  onLoad() {\n    console.log('[PROFILE] é¡µé¢åŠ è½½');\n    \n    // æ³¨å†Œç™»å½•çŠ¶æ€å˜æ›´äº‹ä»¶ç›‘å¬\n    uni.$on('AUTH_CHANGED', this.onAuthChanged);\n    \n    this.refreshProfile();\n  },\n  \n  onShow() {\n    console.log('[PROFILE] é¡µé¢æ˜¾ç¤ºï¼Œåˆ·æ–°ç”¨æˆ·æ•°æ®');\n    this.refreshProfile();\n    // é€šçŸ¥å¯¼èˆªæ æ›´æ–°çŠ¶æ€\n    tabBarManager.setCurrentIndexByPath('/pages/user/home');\n  },\n  \n  onUnload() {\n    // ç§»é™¤äº‹ä»¶ç›‘å¬\n    uni.$off('AUTH_CHANGED', this.onAuthChanged);\n  },\n  \n  methods: {\n    // ç»Ÿä¸€åˆ·æ–°å‡½æ•° - åŸºäº isAuthed() å’Œ getLoginData() æ›´æ–°æ‰€æœ‰çŠ¶æ€\n    refreshProfile() {\n      // å¼€å§‹åŠ è½½\n      this.isLoading = true;\n      \n      // æ¨¡æ‹Ÿå¼‚æ­¥åŠ è½½ï¼ˆç¡®ä¿éª¨æ¶å±å¯è§ï¼‰\n      setTimeout(() => {\n        // è·å–æœ€æ–°ç™»å½•çŠ¶æ€\n        this.authed = isAuthed();\n        const loginData = getLoginData();\n      \n      if (this.authed) {\n        // å·²ç™»å½•çŠ¶æ€\n        const uid = loginData.uid || '';\n        const userInfo = loginData.userInfo || {};\n        \n        // è®¡ç®—æ˜¾ç¤ºåç§°ï¼šnickname > username > uidå6ä½ï¼ˆä¸åŠ å‰ç¼€ï¼‰\n        let displayName = '';\n        if (userInfo.nickname) {\n          displayName = userInfo.nickname;\n        } else if (userInfo.username) {\n          displayName = userInfo.username;\n        } else if (uid) {\n          // uidå…œåº•ï¼šåªæ˜¾ç¤ºå6ä½ï¼Œä¸åŠ å‰ç¼€\n          displayName = uid.slice(-6);\n        } else {\n          displayName = 'ç”¨æˆ·';\n        }\n        \n        // æ›´æ–°çŠ¶æ€æ•°æ®\n        this.name = displayName;\n        this.uid = uid;\n        this.avatar = userInfo.avatar || '';\n        \n        // åŠ è½½è®¢é˜…è®¾ç½®\n        this.loadSubscriptionSettings();\n        \n      } else {\n        // æœªç™»å½•çŠ¶æ€\n        this.name = 'æœªç™»å½•';\n        this.uid = '';\n        this.avatar = '';\n      }\n      \n        // è¾“å‡ºæ—¥å¿—\n        console.log(`[PROFILE] refreshProfile authed=${this.authed} name=${this.name} uid=${this.uid}`);\n        \n        // å¼ºåˆ¶æ›´æ–°è§†å›¾\n        this.$forceUpdate();\n        \n        // ç»“æŸåŠ è½½\n        this.isLoading = false;\n      }, 300); // 300mså»¶è¿Ÿï¼Œç¡®ä¿éª¨æ¶å±å¯è§\n    },\n    \n    // ç™»å½•çŠ¶æ€å˜æ›´äº‹ä»¶å¤„ç†\n    onAuthChanged(data) {\n      console.log(`[PROFILE] on AUTH_CHANGED authed=${data.authed} â†’ refresh`);\n      // ç«‹å³åˆ·æ–°ç”¨æˆ·æ•°æ®\n      this.refreshProfile();\n    },\n    \n    // å¤„ç†ç™»å½•/é€€å‡ºç™»å½•\n    async handleAuthAction() {\n      if (this.authed) {\n        // é€€å‡ºç™»å½•\n        await this.handleLogout();\n      } else {\n        // è·³è½¬ç™»å½•\n        this.handleLogin();\n      }\n    },\n    \n    // å¤„ç†ç™»å½•\n    handleLogin() {\n      console.log('[PROFILE] è·³è½¬ç™»å½•é¡µ');\n      uni.navigateTo({\n        url: '/pages/login/login?from=' + encodeURIComponent('/pages/user/home')\n      });\n    },\n    \n    // å¤„ç†é€€å‡ºç™»å½•\n    async handleLogout() {\n      try {\n        uni.showLoading({\n          title: 'é€€å‡ºä¸­...'\n        });\n        \n        // æ¸…é™¤æœ¬åœ°ç™»å½•æ•°æ® - è¿™ä¼šè‡ªåŠ¨è§¦å‘ AUTH_CHANGED äº‹ä»¶\n        clearLoginData();\n        \n        console.log('[PROFILE] logout done');\n        \n        // ç«‹å³åˆ·æ–°ç”¨æˆ·æ•°æ®\n        this.refreshProfile();\n        \n        uni.hideLoading();\n        \n        uni.showToast({\n          title: 'å·²é€€å‡ºç™»å½•',\n          icon: 'success',\n          duration: 2000\n        });\n        \n      } catch (error) {\n        console.error('[PROFILE] é€€å‡ºç™»å½•å¤±è´¥:', error);\n        uni.hideLoading();\n        uni.showToast({\n          title: 'é€€å‡ºå¤±è´¥',\n          icon: 'none',\n          duration: 2000\n        });\n      }\n    },\n    \n    // é¡µé¢å¯¼èˆª\n    navigateTo(url) {\n      console.log('[PROFILE] å¯¼èˆªåˆ°:', url);\n      uni.navigateTo({ url });\n    },\n    \n    // æ˜¾ç¤ºé—®é¢˜åé¦ˆ - è·³è½¬åˆ°ç‹¬ç«‹é¡µé¢\n    showFeedback() {\n      console.log('[PROFILE] click feedback â†’ /pages-sub/other/feedback');\n      uni.navigateTo({\n        url: '/pages-sub/other/feedback'\n      });\n    },\n    \n    // æ˜¾ç¤ºè®¢é˜…è®¾ç½®\n    showSubscriptionSettings() {\n      if (!this.authed) {\n        this.handleLogin();\n        return;\n      }\n      this.showSubscriptionPopup = true;\n    },\n    \n    // åŠ è½½è®¢é˜…è®¾ç½®\n    async loadSubscriptionSettings() {\n      try {\n        if (typeof subscribeAPI !== 'undefined' && subscribeAPI.getSettings) {\n          const settings = await subscribeAPI.getSettings();\n          this.subscriptionSettings = { ...this.subscriptionSettings, ...settings };\n        }\n      } catch (error) {\n        console.error('[PROFILE] åŠ è½½è®¢é˜…è®¾ç½®å¤±è´¥:', error);\n      }\n    },\n    \n    // æ›´æ–°è®¢é˜…è®¾ç½®\n    async updateSubscription() {\n      try {\n        if (typeof subscribeAPI !== 'undefined' && subscribeAPI.updateSettings) {\n          await subscribeAPI.updateSettings(this.subscriptionSettings);\n          console.log('[PROFILE] è®¢é˜…è®¾ç½®å·²æ›´æ–°');\n        }\n      } catch (error) {\n        console.error('[PROFILE] æ›´æ–°è®¢é˜…è®¾ç½®å¤±è´¥:', error);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.page {\n  min-height: 100vh;\n  background: #F5F5F7;\n  padding: 40rpx;\n  padding-top: calc(40rpx + constant(safe-area-inset-top));\n  padding-top: calc(40rpx + env(safe-area-inset-top));\n  padding-bottom: calc(50px + constant(safe-area-inset-bottom) + 40rpx);\n  padding-bottom: calc(50px + env(safe-area-inset-bottom) + 40rpx);\n}\n\n/* éª¨æ¶å±æ ·å¼ */\n.skeleton-wrapper {\n  padding: 40rpx;\n}\n\n.skeleton-user-card {\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(20rpx);\n  border-radius: 24rpx;\n  padding: 40rpx;\n  margin-bottom: 40rpx;\n  display: flex;\n  align-items: center;\n}\n\n.skeleton-avatar {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 60rpx;\n  background: #E5E5EA;\n  margin-right: 32rpx;\n  flex-shrink: 0;\n}\n\n.skeleton-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 16rpx;\n}\n\n.skeleton-name {\n  width: 200rpx;\n  height: 36rpx;\n  border-radius: 8rpx;\n  background: #E5E5EA;\n}\n\n.skeleton-status {\n  width: 160rpx;\n  height: 26rpx;\n  border-radius: 8rpx;\n  background: #E5E5EA;\n}\n\n.skeleton-menu {\n  height: 100rpx;\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(20rpx);\n  border-radius: 24rpx;\n  margin-bottom: 16rpx;\n}\n\n/* éª¨æ¶å±åŠ¨ç”» */\n@keyframes skeleton-loading {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n.skeleton-animation {\n  animation: skeleton-loading 1.5s ease-in-out infinite;\n}\n\n/* ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ */\n.user-card {\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(20rpx);\n  border-radius: 24rpx;\n  padding: 40rpx;\n  margin-bottom: 40rpx;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.08);\n  border: 1rpx solid rgba(255, 255, 255, 0.2);\n}\n\n.user-avatar {\n  width: 120rpx;\n  height: 120rpx;\n  margin-right: 32rpx;\n  flex-shrink: 0;\n}\n\n.avatar-img {\n  width: 100%;\n  height: 100%;\n  border-radius: 60rpx;\n}\n\n.avatar-placeholder {\n  width: 100%;\n  height: 100%;\n  border-radius: 60rpx;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  overflow: hidden;\n}\n\n/* æ·»åŠ æ¸å˜åŠ¨ç”»èƒŒæ™¯ */\n.avatar-placeholder::before {\n  content: '';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: linear-gradient(45deg, \n    transparent 30%, \n    rgba(255, 255, 255, 0.2) 50%, \n    transparent 70%\n  );\n  animation: shimmer 2s infinite;\n}\n\n@keyframes shimmer {\n  0% {\n    transform: translateX(-100%) translateY(-100%) rotate(45deg);\n  }\n  100% {\n    transform: translateX(100%) translateY(100%) rotate(45deg);\n  }\n}\n\n.avatar-text {\n  font-size: 48rpx;\n  font-weight: 600;\n  color: #FFFFFF;\n  position: relative;\n  z-index: 1;\n  text-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.2);\n}\n\n.user-info {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.user-name {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 8rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  max-width: 100%;\n}\n\n.user-status {\n  font-size: 26rpx;\n  color: #666;\n}\n\n.user-actions {\n  flex-shrink: 0;\n  min-width: 160rpx;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.action-btn {\n  padding: 16rpx 32rpx;\n  border-radius: 48rpx;\n  font-size: 28rpx;\n  font-weight: 500;\n  border: none;\n  transition: all 0.3s ease;\n  min-height: 88rpx;\n  min-width: 144rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  z-index: 10;\n}\n\n.login-btn {\n  background: linear-gradient(135deg, #007AFF, #5856D6);\n  color: #FFFFFF;\n}\n\n.logout-btn {\n  background: rgba(255, 59, 48, 0.1);\n  color: #FF3B30;\n  border: 1rpx solid rgba(255, 59, 48, 0.2);\n}\n\n.action-btn:active {\n  transform: scale(0.95);\n}\n\n/* èœå•åŒºåŸŸ */\n.menu-section,\n.shortcut-section {\n  margin-bottom: 40rpx;\n}\n\n.menu-title {\n  margin-bottom: 24rpx;\n}\n\n.title-text {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #333;\n}\n\n.menu-list {\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(20rpx);\n  border-radius: 24rpx;\n  overflow: hidden;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.08);\n  border: 1rpx solid rgba(255, 255, 255, 0.2);\n}\n\n.menu-item {\n  display: flex;\n  align-items: center;\n  padding: 32rpx 40rpx;\n  border-bottom: 1rpx solid rgba(0, 0, 0, 0.05);\n  transition: background-color 0.3s ease;\n}\n\n.menu-item:last-child {\n  border-bottom: none;\n}\n\n.menu-item:active {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.menu-icon {\n  width: 48rpx;\n  height: 48rpx;\n  margin-right: 24rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 32rpx;\n}\n\n.menu-text {\n  flex: 1;\n  font-size: 30rpx;\n  color: #333;\n}\n\n.menu-arrow {\n  font-size: 32rpx;\n  color: #C7C7CC;\n  font-weight: 300;\n}\n\n/* å¿«æ·å…¥å£ */\n.shortcut-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 24rpx;\n}\n\n/* å°å±å¹•è®¾å¤‡ï¼ˆå®½åº¦ <= 375pxï¼‰ */\n@media screen and (max-width: 375px) {\n  .shortcut-grid {\n    gap: 16rpx;\n  }\n  \n  .shortcut-item {\n    padding: 32rpx;\n  }\n  \n  .shortcut-icon {\n    font-size: 40rpx;\n  }\n  \n  .shortcut-text {\n    font-size: 24rpx;\n  }\n}\n\n/* å¤§å±å¹•è®¾å¤‡ï¼ˆå®½åº¦ >= 428pxï¼‰ */\n@media screen and (min-width: 428px) {\n  .shortcut-grid {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 32rpx;\n  }\n}\n\n/* å¹³æ¿è®¾å¤‡ï¼ˆå®½åº¦ >= 768pxï¼‰ */\n@media screen and (min-width: 768px) {\n  .page {\n    max-width: 750rpx;\n    margin: 0 auto;\n  }\n  \n  .shortcut-grid {\n    grid-template-columns: repeat(4, 1fr);\n  }\n}\n\n.shortcut-item {\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(20rpx);\n  border-radius: 24rpx;\n  padding: 40rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  transition: all 0.3s ease;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.08);\n  border: 1rpx solid rgba(255, 255, 255, 0.2);\n}\n\n.shortcut-item:active {\n  transform: scale(0.95);\n  background: rgba(255, 255, 255, 0.7);\n}\n\n.shortcut-icon {\n  font-size: 48rpx;\n  margin-bottom: 16rpx;\n}\n\n.shortcut-text {\n  font-size: 26rpx;\n  color: #333;\n  font-weight: 500;\n}\n\n/* å¼¹çª—æ ·å¼ */\n.popup-content {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  /* æ·»åŠ åº•éƒ¨å®‰å…¨åŒºåŸŸ */\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n}\n\n.popup-header {\n  padding: 40rpx;\n  border-bottom: 1rpx solid #eee;\n  flex-shrink: 0;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.popup-title {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #333;\n}\n\n.popup-close {\n  position: absolute;\n  right: 40rpx;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 64rpx;\n  height: 64rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background: #F5F5F7;\n  transition: all 0.3s ease;\n}\n\n.popup-close:active {\n  transform: translateY(-50%) scale(0.9);\n  background: #E5E5EA;\n}\n\n.close-icon {\n  font-size: 48rpx;\n  color: #86868B;\n  font-weight: 300;\n  line-height: 1;\n}\n\n.popup-body {\n  flex: 1;\n  padding: 40rpx;\n}\n\n.setting-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24rpx 0;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n\n.setting-item:last-child {\n  border-bottom: none;\n}\n\n.setting-label {\n  font-size: 30rpx;\n  color: #333;\n}\n</style>","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&id=9ab56a0c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&id=9ab56a0c&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1760873487252\n      var cssReload = require(\"D:/HBuilderX.4.65.2025051206/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}