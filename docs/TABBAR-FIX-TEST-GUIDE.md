# 导航栏修复测试指南

## 修复内容总结

### 1. 图标重叠问题
- 调整了图标容器尺寸从 24x24px 到 26x26px
- 为每个图标设置了合适的独立尺寸（22x22px）
- 添加了 flexbox 布局确保图标居中

### 2. 探索图标斜杠偏移
- 修正了斜杠的定位方式，使用 `transform: translate(-50%, -50%) rotate(-45deg)`
- 将旋转中心点设置为 `center center`

### 3. 状态更新延迟问题
- 创建了全局 TabBar 状态管理器 `utils/tabbar-manager.js`
- 在每个 TabBar 页面的 `onShow` 生命周期中同步状态
- 导航栏组件通过监听器实时响应状态变化

## 测试步骤

### 1. 基础导航测试
1. 启动应用，默认应该在首页
2. 检查底部导航栏的"首页"图标是否高亮
3. 依次点击各个导航项：首页 → 探索 → AI倾诉 → 社区 → 我的
4. 每次点击后检查：
   - 页面是否正确切换
   - 对应图标是否立即高亮
   - 之前的图标是否取消高亮

### 2. 快速切换测试
1. 快速连续点击不同的导航项
2. 检查图标状态是否能即时跟随更新
3. 不应出现延迟或状态不同步的情况

### 3. 页面返回测试
1. 从任意 TabBar 页面进入子页面（如：探索 → 压力测评）
2. 使用返回按钮返回到 TabBar 页面
3. 检查导航栏图标是否正确显示当前页面状态

### 4. 图标显示测试
1. 检查各个图标是否正常显示，没有重叠
2. 特别注意：
   - 首页图标（房子形状）
   - 探索图标（放大镜，斜杠应该正确显示）
   - 社区图标（人群图标）
   - 我的图标（个人图标）

### 5. 特殊场景测试
1. 从登录页面登录后跳转到个人中心，检查导航栏状态
2. 使用 `uni.switchTab` API 编程式导航，检查状态是否同步
3. 在不同设备尺寸下测试图标显示是否正常

## 预期结果

✅ 所有图标清晰显示，无重叠现象
✅ 探索图标的斜杠位置正确
✅ 点击导航项后，图标状态立即更新
✅ 页面切换流畅，状态同步准确
✅ 从子页面返回后，导航栏状态正确

## 问题排查

如果测试中发现问题：

1. **图标仍然重叠**
   - 检查 CSS 是否正确应用
   - 可能需要清除缓存重新编译

2. **状态更新仍有延迟**
   - 检查控制台是否有错误信息
   - 确认 `tabbar-manager.js` 是否正确导入
   - 检查各页面的 `onShow` 方法是否正确调用

3. **探索图标斜杠位置不对**
   - 检查 `.explore-line` 的 CSS 样式是否正确应用
   - 可能需要调整 transform 的具体数值

## 调试信息

在控制台可以看到以下调试信息：
- `[TabBarManager]` 开头的状态管理日志
- 各页面的 `onShow` 触发日志
- 导航切换时的状态更新日志
